!function e(t,n,o){function i(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(r)return r(s,!0);var p=new Error("Cannot find module '"+s+"'");throw p.code="MODULE_NOT_FOUND",p}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(e){var n=t[s][1][e];return i(n?n:e)},d,d.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t){function n(){var e=l.className.split(" ");e.push(s()?v.has:v.hasNot),l.className=e.join(" ")}function o(){var e,t,n={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"},o=document.body||document.documentElement,i=document.createElement("div");o.insertBefore(i,null);for(t in n)n.hasOwnProperty(t)&&void 0!==i.style[t]&&(i.style[t]="translate3d(1px,1px,1px)",e=window.getComputedStyle(i).getPropertyValue(n[t]));return o.removeChild(i),d.css.translate3d=void 0!==e&&e.length>0&&"none"!==e,d.css.translate3d}function i(e){if(d.css[e])return d.css[e];if("translate3d"===e)return o(e);var t=l.style;if("string"==typeof t[e])return d.css[e]=!0,!0;e=e.charAt(0).toUpperCase()+e.substr(1);for(var n=0;n<f.length;n++)if("string"==typeof t[f[n]+e])return d.css[e]=!0,d.css[e];return d.css[e]=!1,d.css[e]}function r(e,t){if(!t)return i(e);var n="";return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,"").getPropertyValue(t):e.currentStyle&&(t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),n=e.currentStyle[t]),n}function s(){return d.touch="undefined"!=typeof window.ontouchstart,d.touch}function a(e){return{top:e.getBoundingClientRect().top+window.pageYOffset-document.documentElement.clientTop,left:e.getBoundingClientRect().left+window.pageXOffset-document.documentElement.clientLeft}}function c(e){if(!(e.length<1)){var t=a(e),n=document.documentElement.scrollTop||document.body.scrollTop;return t.top+e.offsetHeight<=n+document.documentElement.clientHeight}}function p(e){if(!(e.length<1)){var t=a(e);return t.left+e.offsetWidth<=document.documentElement.clientWidth}}var d={css:{}},l=document.documentElement,u=["no-touch","touch-device"],f=["Moz","Webkit","Khtml","O","ms"],v={hasNot:u[0],has:u[1]};n(),t.exports={_attachClasses:n,_state:d,css:r,touch:s,elementVisibleBottom:c,elementVisibleRight:p},"undefined"==typeof skyComponents&&(window.skyComponents={}),skyComponents.detect=t.exports},{}],2:[function(e,t){function n(){c(window,"resize",o)}function o(){clearTimeout(d.resize),d.resize=setTimeout(function(){r(window,"resizeend")},200)}function i(e){/in/.test(document.readyState)?setTimeout(function(){i(e)},9):e()}function r(e,t){p.dispatchEvent(e,t)}function s(e,t,n){e.split(" ").forEach(function(e){p.attachEvent(e,t,n)})}function a(e,t,n){t.split(" ").forEach(function(t){e.isNodeList?Array.prototype.forEach.call(e,function(e){p.removeEventListener(e,t,n)}):p.removeEventListener(e,t,n)})}function c(e,t,n,o){t.split(" ").forEach(function(t){e.isNodeList?Array.prototype.forEach.call(e,function(e){p.addEventListener(e,t,n,o)}):p.addEventListener(e,t,n,o)})}var p=e("../utils/event-helpers"),d={resize:null};n(),t.exports={live:s,on:c,off:a,emit:r,trigger:r,ready:i},"undefined"==typeof skyComponents&&(window.skyComponents={}),skyComponents.event=t.exports},{"../utils/event-helpers":4}],3:[function(e,t){var n=e("./utils/version"),o=e("./api/event"),i=e("./api/detect");t.exports={version:n,event:o,detect:i},"undefined"==typeof skyComponents&&(window.skyComponents={}),skyComponents.version=n,skyComponents.event=o,skyComponents.detect=i},{"./api/detect":1,"./api/event":2,"./utils/version":5}],4:[function(e,t){function n(e){return e.replace(/\b[a-z]/g,function(){return arguments[0].toUpperCase()})}function o(e){var t="";l[e]&&(e=l[e],t="end");var o=!1,i=e.toLowerCase()+t.toLowerCase(),r=n(e.toLowerCase())+n(t.toLowerCase());return d[i]?d[i]:(["ms","moz","webkit","o",""].forEach(function(e){("on"+e+i in window||"on"+e+i in document.documentElement)&&(o=e?e+r:i)}),d[i]=o,o)}function i(e,t){t=o(t)||t;var n;document.createEvent?(n=document.createEvent("CustomEvent"),n.initCustomEvent(t,!1,!1,null),e.dispatchEvent(n)):(n=document.createEventObject(),e.fireEvent("on"+t,n))}function r(e,t,n,i){t=o(t)||t,e.addEventListener?e.addEventListener(t,n,!!i):e.attachEvent("on"+t,n)}function s(e,t,n){t=o(t)||t,e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)}function a(e){var t=e.target;p[e.type].forEach(function(n){var o=document.querySelectorAll(n.selector),i=!1;Array.prototype.forEach.call(o,function(e){return e.contains(t)||e===t?void(i=!0):void 0}),i&&n.handler.call(t,e)})}function c(e,t,n){p[e]||(p[e]=[],r(document.documentElement,e,a,!0)),p[e].push({selector:t,handler:n})}var p={},d={},l={transitionend:"transition",animationend:"animation"};NodeList.prototype.isNodeList=HTMLCollection.prototype.isNodeList=!0,t.exports={dispatchEvent:i,attachEvent:c,addEventListener:r,removeEventListener:s}},{}],5:[function(e,t){t.exports="0.0.2"},{}],6:[function(e,t,n){arguments[4][5][0].apply(n,arguments)},{dup:5}],7:[function(e){var t=e("./video-wrapper"),n=t.video;$.fn.video=function(e){return this.each(function(){new n($(this),e)})}},{"./video-wrapper":8}],8:[function(e,t){"use strict";function n(e,t){if(e.attr("data-video-id")){this.$container=e,this.options={token:t.token,autoplay:!1,videoId:e.attr("data-video-id")},this.toolkitOptions={animationSpeed:void 0!==t.animationSpeed?t.animationSpeed:500,onPlay:t.onPlay,closeCallback:t.closeCallback,$wrapperLocation:t.$wrapperLocation||this.$container},this.bindEvents()}}var o=e("../../bower_components/bskyb-core/src/scripts/core"),i=o.event;"undefined"!=typeof e&&(window.require=function(){}),n.prototype={bindEvents:function(){var e=this;e.$container.on("click",".play-video",function(t){e.createWrapper(),e.play(t)})},bindWrapperEvents:function(){var e=this;$("body").one("keydown",e.stopOnEscape.bind(e)),e.$wrapper.one("click touchstart",".close",e.stop.bind(e)),e.$player.one("ended webkitendfullscreen",e.stop.bind(e)),e.options.freewheel&&e.$player.on("onSlotStarted",function(){e.$player.off("ended webkitendfullscreen"),e.$player.one("onSlotEnded",function(){e.$player.one("playing",function(){e.$player.one("ended webkitendfullscreen",e.stop.bind(e))})})})},createWrapper:function(){this.toolkitOptions.$wrapperLocation.append('<div class="video-wrapper"><a href="#!" class="close"><i class="skycon-close" aria-hidden=true></i><span class="speak">Close</span></a><div class="videocontrolcontainer"><video></video><img class="posterFrame"/></div></div>'),this.toolkitOptions.$wrapperLocation.find(".posterFrame").on("error",function(){this.src=options.placeHolderImage}),this.toolkitOptions.$wrapperLocation.append('<div class="video-overlay"></div>'),this.$player=this.toolkitOptions.$wrapperLocation.parent().find("video"),this.$wrapper=this.toolkitOptions.$wrapperLocation.find(".video-wrapper"),this.$wrapper.attr("id","video-"+this.options.videoId),this.bindWrapperEvents()},removeWrapper:function(){this.$wrapper.removeClass("playing-video").remove(),this.toolkitOptions.$wrapperLocation.find(".video-overlay").remove()},play:function(e){e&&e.preventDefault();var t=this;t.toolkitOptions.onPlay&&t.toolkitOptions.onPlay(),this.showCanvas(function(){t.$player.sky_html5player(t.options),setTimeout(function(){sky.html5player.play()},1333)})},stopOnEscape:function(e){27===e.keyCode&&(e.preventDefault(),this.stop())},stop:function(e){e&&e.preventDefault();var t=this;i.off(window,"resizeend",t.resizeListener),sky.html5player.close(this.$wrapper),this.hideCanvas()},showCanvas:function(e){var t,n=this.$container,o=this.toolkitOptions.$wrapperLocation,r=o.find(".video-overlay"),s=o.find(".video-wrapper"),a=n.find(".play-video"),c=s.find(".close"),p=0===this.toolkitOptions.animationSpeed?0:this.toolkitOptions.animationSpeed||500,d=this;this.originalHeight=n.height(),s.addClass("playing-video"),r.fadeIn(p,function(){a.fadeOut(p),c.addClass("active"),t=d.calculateHeight(),n.animate({height:t},p,function(){d.resizeListener=d.resizeContainer.bind(d),i.on(window,"resizeend",d.resizeListener),s.show(),r.fadeOut(p),e()})})},calculateHeight:function(){return Math.round(this.$container.width()/16*9)},resizeContainer:function(){this.$container.animate({height:this.calculateHeight()},250)},hideCanvas:function(){var e=this,t=this.$container,n=this.toolkitOptions.$wrapperLocation,o=n.find(".video-overlay"),i=n.find(".video-wrapper"),r=t.find(".play-video"),s=i.find(".close"),a=0===this.toolkitOptions.animationSpeed?0:this.toolkitOptions.animationSpeed||500,c=this.originalHeight;o.fadeIn(a,function(){s.removeClass("active"),t.animate({height:c},a,function(){t.css({height:"auto"}),e.toolkitOptions.closeCallback&&e.toolkitOptions.closeCallback(),r.fadeIn(a),o.hide(),i.fadeOut(a,e.removeWrapper.bind(e))})})}},t.exports={video:n,version:e("./utils/version.js")},"undefined"==typeof skyComponents&&(window.skyComponents={}),skyComponents["video-wrapper"]=t.exports},{"../../bower_components/bskyb-core/src/scripts/core":3,"./utils/version.js":6}]},{},[7]);